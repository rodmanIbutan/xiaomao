{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/select-cinema/select-cinema.vue?0a7b","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/select-cinema/select-cinema.vue?dc08","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/select-cinema/select-cinema.vue?bf15","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/select-cinema/select-cinema.vue?4ff1","uni-app:///pages/subPages/select-cinema/select-cinema.vue","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/select-cinema/select-cinema.vue?e961","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/select-cinema/select-cinema.vue?b064"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","filterNav","selectTime","data","showTime","params","dateTime","movieId","pageNum","limit","hallType","brandId","serviceId","selectRegion","hasMore","isShow","cityCinemaInfo","cinemas","nothing","noSchedule","onLoad","onReachBottom","methods","initPage","uni","title","that","getCinemas","url","method","header","selectCity","success","resolve","console","_this","getFilter","changeTime","changeCondition","obj","toggleShow"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0H;AAC1H;AACiE;AACL;AACa;;;AAGzE;AACqL;AACrL,gBAAgB,yLAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,0MAEN;AACP,KAAK;AACL;AACA,aAAa,oMAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/CA;AAAA;AAAA;AAAA;AAAosB,CAAgB,mrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0ExtB;AACA;AAAA,eACA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MAEA;MACAC;QACA;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEAC;MACAC;MAEA;MACAC;MAEA;MACAC;MAEA;MACAC;MAEA;MACA;MACAC;MAEAX;IACA;EACA;EACAY;IACA;EACA;EACA;EACAC;IACA;MACA;IACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACAC;QACAC;MACA;MACA;MACA;QACArB;QACAC,wCACAqB;UACAnB;QAAA;MAEA;MACA;IACA;IAEA;IACAoB;MACA;MACA;MACA;QACAH;UACAI;UACAC;UACAC;YACA;UACA;UACA3B,sCACAE;YACAG;YACAuB;UAAA,EACA;UACAC;YACAR;YACA;YACAS;YACAC;YACA;cACAC;gBACAhB;gBACAL;cACA;cACA;YACA;YACAqB;cACArB;cACAG;cACAT;YACA;UACA;QACA;MACA;IACA;IAEA;IACA4B;MACA;MACAZ;QACAI;QACAC;QACA1B;QACA6B;UACAE;UACAC;YACAnB;UACA;QACA;MACA;IACA;IAEA;IACAqB;MACA;MACA;MACA;QACApB;QACAF;QACA;QACAI;QACAL;QACAT,wCACAqB;UACApB;UACAE;QAAA;MAEA;MACAgB;QACAC;MACA;MACA;MACA;IACA;IAEA;IACAa;MAAA;MACA;MACAd;QACAC;MACA;MACA,aACA;QACApB,sDACA,cACAkC;UACA/B;QAAA,EACA;QACAS;QACAC;MACA,GACA;QACA;UACA;YACA;cACAA;YACA;UACA;UACAM;QACA;MACA,EACA;IACA;IAEA;IACAgB;MACA;MACA;QACAzB;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACpQA;AAAA;AAAA;AAAA;AAA2/B,CAAgB,g8BAAG,EAAC,C;;;;;;;;;;;ACA/gC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/subPages/select-cinema/select-cinema.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/subPages/select-cinema/select-cinema.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./select-cinema.vue?vue&type=template&id=09b5cd43&\"\nvar renderjs\nimport script from \"./select-cinema.vue?vue&type=script&lang=js&\"\nexport * from \"./select-cinema.vue?vue&type=script&lang=js&\"\nimport style0 from \"./select-cinema.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/subPages/select-cinema/select-cinema.vue\"\nexport default component.exports","export * from \"-!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./select-cinema.vue?vue&type=template&id=09b5cd43&\"","var components\ntry {\n  components = {\n    selectTime: function () {\n      return import(\n        /* webpackChunkName: \"components/select-time/select-time\" */ \"@/components/select-time/select-time.vue\"\n      )\n    },\n    filterNav: function () {\n      return import(\n        /* webpackChunkName: \"components/filter-nav/filter-nav\" */ \"@/components/filter-nav/filter-nav.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.cinemas.length > 0 && _vm.hasMore\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./select-cinema.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./select-cinema.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"container\" :style=\"'position:' + (isShow ? 'fixed' : '')\">\n        <view class=\"top\">\n            <view>\n                <select-time :start-time=\"showTime\" @selectDayEvent=\"changeTime\"></select-time>\n            </view>\n            <view>\n                <filter-nav :city-cinema-info=\"cityCinemaInfo\" @change=\"changeCondition\" @toggleShow=\"toggleShow\" v-if=\"isShow\"></filter-nav>\n            </view>\n        </view>\n        <view class=\"main-content\">\n            <view class=\"cinema-list\">\n                <block v-for=\"(item, index) in cinemas\" :key=\"index\">\n                    <navigator\n                        :url=\"'/pages/subPages/cinema-detail/cinema-detail?cinemaId=' + item.cinema.id + '&movieId=' + params.movieId + '&day=' + params.dateTime\"\n                        hover-class=\"none\"\n                    >\n                        <view class=\"flex item\">\n                            <view class=\"flex_auto item_left\">\n                                <view>\n                                    <text class=\"title\">{{ item.cinema.nm }}</text>\n                                </view>\n                                <view>\n                                    <text class=\"sub_title\">{{ item.cinema.addr }}</text>\n                                </view>\n                                <view class=\"tag\">\n                                    <text v-if=\"item.cinema.endorse\">改签</text>\n                                    <text v-if=\"item.cinema.allowrefund\">退票</text>\n                                    <text v-for=\"(item, index1) in item.hallTypeList\" :key=\"index1\">{{ item.halltype }}</text>\n                                </view>\n                            </view>\n                            <view class=\"item_right\" v-if=\"item.cinema.distance\">\n                                <view>\n                                    <text class=\"price\">{{ item.cinema.distance }}km</text>\n                                </view>\n                            </view>\n                        </view>\n                    </navigator>\n                </block>\n            </view>\n            <view v-if=\"cinemas.length > 0 && hasMore\">\n                <!-- parse <template is=\"loadingMore\"/> -->\n                <block name=\"loadingMore\" v-if=\"false\">\n                    <view class=\"loadingMore\">\n                        <image src=\"/static/image/user/loading.gif\" class=\"loading-img\"></image>\n                        <view class=\"loading-text\">正在加载...</view>\n                    </view>\n                </block>\n            </view>\n            <view v-if=\"nothing\">\n                <!-- parse <template is=\"nothing\" :data=\"message:'暂无符合条件的影院'\"/> -->\n                <block name=\"nothing\" v-if=\"false\">\n                    <view class=\"nothing\">\n                        <image src=\"/static/image/user/nothing.png\" class=\"nothing-img\"></image>\n                        <view class=\"nothing-text\">{{ '没有找到相关内容' }}</view>\n                    </view>\n                </block>\n            </view>\n            <view v-if=\"noSchedule\">\n                <!-- parse <template is=\"nothing\" :data=\"message:'当天暂无场次'\"/> -->\n                <block name=\"nothing\" v-if=\"false\">\n                    <view class=\"nothing\">\n                        <image src=\"/static/image/user/nothing.png\" class=\"nothing-img\"></image>\n                        <view class=\"nothing-text\">{{ '没有找到相关内容' }}</view>\n                    </view>\n                </block>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script>\nimport filterNav from '@/components/filter-nav/filter-nav';\nimport selectTime from '@/components/select-time/select-time';\nconst util = require('../../../utils/util.js');\nconst app = getApp();\nexport default {\n    components: {\n        filterNav,\n        selectTime\n    },\n    data() {\n        return {\n            showTime: '',\n\n            //影片上映日期\n            params: {\n                //url请求参数对象\n                dateTime: '',\n                movieId: 0,\n                pageNum: 0,\n                limit: 8,\n                hallType: -1,\n                brandId: -1,\n                serviceId: -1,\n                selectRegion: ''\n            },\n\n            hasMore: true,\n            isShow: false,\n\n            //导航下拉框是否展开\n            cityCinemaInfo: {},\n\n            //影院过滤菜单\n            cinemas: [],\n\n            //影院列表\n            nothing: false,\n\n            //是否有符合过滤的影院\n            //当天是否有场次，原本时间是由后台返回的，但是缺少城市ID就没有返回，导致当天可能没有播放场次\n            noSchedule: false,\n\n            pageNum: ''\n        };\n    },\n    onLoad(options) {\n        this.initPage(options);\n    },\n    //上拉触底加载更多\n    onReachBottom(e) {\n        if (!this.hasMore) {\n            return;\n        }\n        this.getCinemas(this.params);\n    },\n    methods: {\n        initPage(options) {\n            const movieId = options.movieId;\n            const movieName = options.movieName;\n            const showTime = options.showTime; //影片上映日期\n            uni.setNavigationBarTitle({\n                title: movieName\n            });\n            var that = this;\n            this.setData({\n                showTime: util.formatYear(new Date()),\n                params: {\n                    ...that.params,\n                    movieId: movieId\n                }\n            });\n            //select-time会触发事件来调用changeTime初始化数据\n        },\n\n        //获取影院列表\n        getCinemas(params) {\n            const _this = this;\n            var pageIndex = _this.params.pageNum;\n            return new Promise((resolve, reject) => {\n                uni.request({\n                    url: app.globalData.url + `/cinema/getCinemas`,\n                    method: 'POST',\n                    header: {\n                        'content-type': 'application/x-www-form-urlencoded'\n                    },\n                    data: {\n                        ...params,\n                        pageNum: ++pageIndex,\n                        selectCity: JSON.stringify(app.globalData.selectCity)\n                    },\n                    success(res) {\n                        uni.hideLoading();\n                        // 缺少了城市ID所以返回值缺少showDays，只能自己模拟时间了\n                        resolve(res.data.data.beanList);\n                        console.log(res.data.data);\n                        if (!res.data.data.beanList.length) {\n                            _this.setData({\n                                noSchedule: true,\n                                hasMore: false\n                            });\n                            return;\n                        }\n                        _this.setData({\n                            hasMore: pageIndex < res.data.data.tr,\n                            cinemas: _this.cinemas.concat(res.data.data.beanList),\n                            pageNum: pageIndex\n                        });\n                    }\n                });\n            });\n        },\n\n        //获取过滤菜单数据\n        getFilter() {\n            const _this = this;\n            uni.request({\n                url: app.globalData.url + '/cinema/getFilters',\n                method: 'POST',\n                data: app.globalData.selectCity,\n                success: function (res) {\n                    console.log(res.data);\n                    _this.setData({\n                        cityCinemaInfo: res.data\n                    });\n                }\n            });\n        },\n\n        //当选择的时间变化时触发\n        changeTime(e) {\n            var that = this;\n            const day = util.formatYear(new Date(e.detail.day));\n            this.setData({\n                cinemas: [],\n                isShow: false,\n                //隐藏过滤下拉框\n                noSchedule: false,\n                hasMore: true,\n                params: {\n                    ...that.params,\n                    dateTime: day,\n                    pageNum: 0\n                }\n            });\n            uni.showLoading({\n                title: '正在加载...'\n            });\n            this.getCinemas(this.params);\n            this.getFilter();\n        },\n\n        //当过滤条件变化时调用的函数\n        changeCondition(e) {\n            const obj = e.detail;\n            uni.showLoading({\n                title: '正在加载...'\n            });\n            this.setData(\n                {\n                    params: {\n                        ...this.params,\n                        ...obj,\n                        pageNum: 0\n                    },\n                    cinemas: [],\n                    nothing: false\n                },\n                () => {\n                    this.getCinemas(this.params).then((list) => {\n                        if (!list.length) {\n                            this.setData({\n                                nothing: true\n                            });\n                        }\n                        uni.hideLoading();\n                    });\n                }\n            );\n        },\n\n        //导航下拉框状态变化时的处理，在下拉框展开时禁止滚动穿透\n        toggleShow(e) {\n            const item = e.detail.item;\n            this.setData({\n                isShow: item !== -1\n            });\n        }\n    }\n};\n</script>\n<style>\n@import './select-cinema.css';\n@import '@/templates/nothing/nothing.css';\n@import '@/templates/loadingMore/loadingMore.css';\n</style>\n","import mod from \"-!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./select-cinema.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./select-cinema.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1723696092877\n      var cssReload = require(\"C:/Users/Rodman/application/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}