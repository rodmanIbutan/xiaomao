{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/search-page/search-page.vue?ad26","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/search-page/search-page.vue?986c","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/search-page/search-page.vue?dd2e","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/search-page/search-page.vue?13b5","uni-app:///pages/subPages/search-page/search-page.vue","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/search-page/search-page.vue?ab22","webpack:///C:/Users/Rodman/project/weimai-wetapp-master/xiaomao_uni/pages/subPages/search-page/search-page.vue?5bcc"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","value","stype","placeholder","movies","cinemas","history","movie","id","img","version","enm","cat","rt","sc","cinema","nm","addr","distance","endorse","allowrefund","hallTypeList","onLoad","methods","initPage","search","console","uni","url","method","header","keyword","selectCity","success","res","_this","goBack","delta","clearHistory"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;AACa;;;AAGvE;AACqL;AACrL,gBAAgB,yLAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAAksB,CAAgB,irBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsEttB;AACA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEAC;QACAP;QAEAO;UACAP;UACAQ;UACAC;UACAC;UACAC;UACAC;QACA;QAEAC;MACA;IACA;EACA;EACAC;IACA;IACA;MACAhB;IACA;EACA;EACAiB;IACAC;MACA;MACA;MACA;MACA;QACArB;MACA;QACAA;MACA;MACA;QACAD;QACAC;MACA;IACA;IAEAsB;MACA;MACA;MACAC;MACA;QACAzB;MACA;QACA;QACAK;QACAqB;MACA;MACA;QACA1B;QACAK;MACA;MACAqB;QACAC;QACAC;QACAC;UACA;QACA;QACA9B;UACA+B;UACA7B;UACA8B;QACA;QACAC;UACAP;UACA;YACAQ;UACA;UACAC;YACA/B;YACAC;UACA;QACA;MACA;IACA;IAEA+B;MACAT;QACAU;MACA;IACA;IAEA;IACAC;MACA;QACAhC;MACA;MACAqB;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACvLA;AAAA;AAAA;AAAA;AAAy/B,CAAgB,87BAAG,EAAC,C;;;;;;;;;;;ACA7gC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/subPages/search-page/search-page.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/subPages/search-page/search-page.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./search-page.vue?vue&type=template&id=1f8a5967&\"\nvar renderjs\nimport script from \"./search-page.vue?vue&type=script&lang=js&\"\nexport * from \"./search-page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-page.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/subPages/search-page/search-page.vue\"\nexport default component.exports","export * from \"-!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search-page.vue?vue&type=template&id=1f8a5967&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.history.length\n  var g1 = _vm.movies.length\n  var g2 = _vm.cinemas.length\n  var g3 = _vm.movies.length || _vm.cinemas.length || !_vm.value\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search-page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search-page.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"search-wrapper\">\n        <view class=\"search-header topbar\">\n            <input class=\"search-input\" placeholder-class=\"phcolor\" :placeholder=\"placeholder\" @confirm=\"search\" />\n            <text class=\"iconfont icon-sousuo\"></text>\n            <view class=\"cancel\" @tap=\"goBack\">取消</view>\n        </view>\n\n        <view class=\"result-list\">\n            <view v-if=\"history.length !== 0\" class=\"options\" style=\"margin-top: 98rpx\">\n                <text>历史搜索记录</text>\n                <text @tap=\"clearHistory\">清空</text>\n            </view>\n            <view class=\"options\">\n                <!-- 遍历 history 数组 -->\n                <text class=\"item\" :data-index=\"index\" @tap=\"search\" v-for=\"(item, index) in history\" :key=\"index\">{{ item }}</text>\n            </view>\n            <view v-if=\"movies.length\" class=\"movie-box\">\n                <view class=\"title\">电影</view>\n                <navigator class=\"movie-section\" :url=\"'/pages/subPages/movie-detail/movie-detail?movieId=' + movie.id\" v-for=\"(movie, index) in movies\" :key=\"movie.id\">\n                    <image class=\"movie-img\" :src=\"movie.img\"></image>\n\n                    <view class=\"movie-info\">\n                        <view class=\"movie-name line-ellipsis\">\n                            {{ movie.nm }}\n                            <text :class=\"'version ' + movie.version\"></text>\n                        </view>\n                        <view class=\"line-ellipsis\">{{ movie.enm }}</view>\n                        <view class=\"line-ellipsis\">{{ movie.cat }}</view>\n                        <view class=\"line-ellipsis\">{{ movie.rt }}</view>\n                    </view>\n\n                    <view class=\"score\">\n                        <text class=\"grade\" v-if=\"movie.sc\">{{ movie.sc }}分</text>\n                        <text v-else>暂无评分</text>\n                    </view>\n                </navigator>\n            </view>\n            <view v-if=\"cinemas.length\">\n                <view class=\"title\">影院</view>\n                <!-- parse <template is=\"cinemaSection\" :data=\"cinema\" v-for=\"(cinema,index) in (cinemas)\" :key=\"cinema.id\"></template> -->\n                <block name=\"cinemaSection\" v-for=\"(cinema, index) in cinemas\" :key=\"cinema.id\">\n                    <navigator class=\"cinema-section\" :url=\"'/pages/subPages/cinema-detail/cinema-detail?cinemaId=' + cinema.cinema.id\" hover-class=\"none\">\n                        <view class=\"name-price line-ellipsis\">{{ cinema.cinema.nm }}</view>\n                        <view class=\"address\">\n                            <text class=\"line-ellipsis\">{{ cinema.cinema.addr }}</text>\n                            <text class=\"distance\">{{ cinema.cinema.distance }}km</text>\n                        </view>\n                        <view class=\"feature-tags\">\n                            <text v-if=\"cinema.cinema.endorse\">退</text>\n                            <text v-if=\"cinema.cinema.allowrefund\">改签</text>\n                            <text v-for=\"(item, index) in cinema.hallTypeList\" :key=\"index\">{{ item.halltype }}</text>\n                        </view>\n                    </navigator>\n                </block>\n            </view>\n        </view>\n        <view v-if=\"!(movies.length || cinemas.length || !value)\">\n            <!-- parse <template is=\"nothing\" :data=\"message:'没有找到相关内容'\"/> -->\n            <block name=\"nothing\" v-if=\"false\">\n                <view class=\"nothing\">\n                    <image src=\"/static/image/user/nothing.png\" class=\"nothing-img\"></image>\n                    <view class=\"nothing-text\">{{ '没有找到相关内容' }}</view>\n                </view>\n            </block>\n        </view>\n    </view>\n</template>\n\n<script>\nconst util = require('../../../utils/util.js');\nconst app = getApp();\nexport default {\n    data() {\n        return {\n            value: '',\n            stype: '',\n            placeholder: '',\n            movies: {},\n            cinemas: {},\n            history: [],\n\n            movie: {\n                id: '',\n                img: '',\n                version: '',\n                enm: '',\n                cat: '',\n                rt: '',\n                sc: ''\n            },\n\n            cinema: {\n                id: '',\n\n                cinema: {\n                    id: '',\n                    nm: '',\n                    addr: '',\n                    distance: '',\n                    endorse: '',\n                    allowrefund: ''\n                },\n\n                hallTypeList: []\n            }\n        };\n    },\n    onLoad(query) {\n        this.initPage(query);\n        this.setData({\n            history: uni.getStorageSync('history') || []\n        });\n    },\n    methods: {\n        initPage(query) {\n            //搜索类型，-1代表搜索影院或电影，2代表搜索影院\n            const stype = query.stype;\n            let placeholder = '';\n            if (stype === '-1') {\n                placeholder = '搜电影、搜影院';\n            } else {\n                placeholder = '搜影院';\n            }\n            this.setData({\n                stype,\n                placeholder\n            });\n        },\n\n        search(e) {\n            var value = e.detail.value;\n            const _this = this;\n            console.log(e.target.dataset.index);\n            if (e.target.dataset.index != null) {\n                value = _this.history[e.target.dataset.index];\n            } else {\n                let history = uni.getStorageSync('history') || [];\n                history.push(value);\n                uni.setStorageSync('history', history);\n            }\n            this.setData({\n                value,\n                history: []\n            });\n            uni.request({\n                url: app.globalData.url + `/home/search`,\n                method: 'POST',\n                header: {\n                    'content-type': 'application/x-www-form-urlencoded'\n                },\n                data: {\n                    keyword: value,\n                    stype: _this.stype,\n                    selectCity: JSON.stringify(app.globalData.selectCity)\n                },\n                success(res) {\n                    console.log(res);\n                    for (var index in res.data.data.movies) {\n                        res.data.data.movies[index].rt = util.formatYear(new Date(res.data.data.movies[index].rt));\n                    }\n                    _this.setData({\n                        movies: res.data.data.movies ? res.data.data.movies : [],\n                        cinemas: res.data.data.cinemaVos ? res.data.data.cinemaVos : []\n                    });\n                }\n            });\n        },\n\n        goBack() {\n            uni.navigateBack({\n                delta: 1\n            });\n        },\n\n        //清除缓存历史\n        clearHistory: function () {\n            this.setData({\n                history: []\n            });\n            uni.setStorageSync('history', []);\n        }\n    }\n};\n</script>\n<style>\n@import './search-page.css';\n@import '@/templates/cinemaSection/cinemaSection.css';\n@import '@/templates/nothing/nothing.css';\n</style>\n","import mod from \"-!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search-page.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../application/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search-page.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1723696092841\n      var cssReload = require(\"C:/Users/Rodman/application/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}